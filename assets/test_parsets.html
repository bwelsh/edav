<!DOCTYPE html>
<meta charset="utf-8">
<title>Test Parsets</title>
<style>

body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  margin: auto;
  position: relative;
  width: 1060px;
}

text {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #fff;
  shape-rendering: crispEdges;
}

form.mode {
  position: absolute;
  right: 10px;
  top: 50px;
}

div.tooltip {
  position: absolute;
  text-align: center;
  width: 85px;
  height: 95px;
  padding: 8px;
  font: 12px sans-serif;
  background: lightsteelblue;
  border: 0px;
  border-radius: 8px;
  pointer-events: none;
}

div.charttitle {
  font-size: 24pt;
  text-align: center;
  padding: 10px;
}

</style>
<body>
<div class="charttitle">Test</div>
<form class="mode">
  <label><input type="radio" name="mode" value="normal">Normalized</label>
  <label><input type="radio" name="mode" value="absolute" checked>Absolute</label>
</form>
<div id="vis"></div>
<script src="http://mbostock.github.com/d3/d3.js?1.27.1"></script>
<script src="includes/d3.bespokeparsets.js"></script>
<script src="includes/visFinal.js"></script>
<script>
/*
var chart = d3.parsets();
chart.width(850);


    categoryFormat = chart.categoryFormat(),
    percent = d3.format("%");

chart.tooltipFormat(function(d) {
      var count = d.count,
          p = count / d.parent.count,
          path = [categoryFormat(d.name, d.dimension.name)];
      while ((d = d.parent) && d.name) path.unshift(categoryFormat(d.name, d.dimension.name));
      return path.join(", ") + "<br>" + count + ", " + percent(p);
    });





var vis = d3.select("#vis").append("svg")
  .attr("width", chart.width())
  .attr("height", chart.height());


var dataSet = ["includes/age1.csv", "includes/maritalStatus.csv", "includes/countryOfOrigin.csv", "includes/education.csv", "includes/religion.csv"];
function dataFunc(value) {
 d3.csv(dataSet[value], function(csv) {
  vis.datum(csv).call(chart);
  });
}


//set default opening for viz
age();


function age(){
		d3.select("#vis").selectAll("svg").remove();
		chart = d3.parsets().dimensions(["Sex", "Age", "State"]).value(function(d){return +d.count;})
		chart.width(850);
		vis = d3.select("#vis").append("svg")
		  .attr("width", chart.width())
		  .attr("height", chart.height());
	    dataFunc(0); 
	
	chart.tooltipFormat(function(d) {
	      var count = d.count
	          p = count / d.parent.count,
	          path = [categoryFormat(d.name, d.dimension.name)];
	while ((d = d.parent) && d.name) path.unshift(categoryFormat(d.name, d.dimension.name));
	      return count + ", " + path.join(", ") + ", " + percent(p);
})
}




function maritalStatus(){
	d3.select("#vis").selectAll("svg").remove();
	chart = d3.parsets().dimensions(["Sex", "Marital Status", "State"]).value(function(d){return +d.count;})
	chart.width(850);
	vis = d3.select("#vis").append("svg")
	  .attr("width", chart.width())
	  .attr("height", chart.height());
    dataFunc(1); 
    	chart.tooltipFormat(function(d) {
	      var count = d.count
	          p = count / d.parent.count,
	          path = [categoryFormat(d.name, d.dimension.name)];
	while ((d = d.parent) && d.name) path.unshift(categoryFormat(d.name, d.dimension.name));
		      return count + ", " + path.join(", ") + ", " + percent(p);

		// tooltip for Sex, Marital Status, State pancake
		
	    	}
	    )};	
	
function countryOfOrigin(){
		d3.select("#vis").selectAll("svg").remove();
	chart = d3.parsets().dimensions(["Sex", "Country of origin", "State"]).value(function(d){return +d.count;})
	chart.width(850);
	vis = d3.select("#vis").append("svg")
	  .attr("width", chart.width())
	  .attr("height", chart.height());
    dataFunc(2); 
    	chart.tooltipFormat(function(d) {
	      var count = d.count
	          p = count / d.parent.count,
	          path = [categoryFormat(d.name, d.dimension.name)];
	while ((d = d.parent) && d.name) path.unshift(categoryFormat(d.name, d.dimension.name));
	      return count + ", " + path.join(", ") + "<br>" + percent(p);

		
	    	}
	    )};


	
	
	
*/	
	
</script>
Click on the job categories/industries at left to filter for only those jobs. Change the view from absolute to normalized (percent of jobs) 
through the radio button at the top right.
</body>
